{"ast":null,"code":"var _jsxFileName = \"/Users/kristinabuhovtsova/Documents/Countries/client/src/components/SignUp.js\";\nimport React from 'react';\nimport SignUpForm from \"./SignUpForm\";\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      finished: false,\n      usererror: false,\n      countries: []\n    };\n    this.SignUpRequest = this.SignUpRequest.bind(this);\n  }\n\n  SignUpRequest(userData) {\n    const existingusers = [];\n    let flag = false;\n    axios.get('/catalog/users').then(res => {\n      res.data.forEach(name => {\n        existingusers.push(name);\n      });\n\n      if (existingusers.includes(userData.username)) {\n        flag = true;\n        this.setState({\n          usererror: true\n        });\n      } else {\n        this.setState({\n          finished: true\n        });\n        this.setState({\n          usererror: false\n        });\n        return axios.post('catalog/signup', {\n          'username': userData.username,\n          'password': userData.password,\n          'country': userData.country\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.usererror) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      }, React.createElement(SignUpForm, {\n        onSubmit: this.SignUpRequest,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, \"This nickname is reserved, try another one\"));\n    } else {\n      if (this.state.finished) {\n        return React.createElement(Redirect, {\n          to: \"/signin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 41\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(SignUpForm, {\n          onSubmit: this.SignUpRequest,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        });\n      }\n    }\n  }\n\n}\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/kristinabuhovtsova/Documents/Countries/client/src/components/SignUp.js"],"names":["React","SignUpForm","axios","Redirect","SignUp","Component","constructor","props","state","finished","usererror","countries","SignUpRequest","bind","userData","existingusers","flag","get","then","res","data","forEach","name","push","includes","username","setState","post","password","country","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;;AAGA,MAAMC,MAAN,SAAqBJ,KAAK,CAACK,SAA3B,CAAsC;AAClCC,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAChB,UAAOA,KAAP;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,KADC;AAEXC,MAAAA,SAAS,EAAC,KAFC;AAGXC,MAAAA,SAAS,EAAE;AAHA,KAAb;AAKA,SAAKC,aAAL,GAAmB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAAnB;AACD;;AAEHD,EAAAA,aAAa,CAACE,QAAD,EAAW;AACpB,UAAMC,aAAa,GAAC,EAApB;AACA,QAAIC,IAAI,GAAC,KAAT;AACAd,IAAAA,KAAK,CAACe,GAAN,CAAW,gBAAX,EACKC,IADL,CACWC,GAAG,IAAI;AAACA,MAAAA,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiBC,IAAI,IAAI;AACnCP,QAAAA,aAAa,CAACQ,IAAd,CAAmBD,IAAnB;AAAyB,OADf;;AAEf,UAAIP,aAAa,CAACS,QAAd,CAAuBV,QAAQ,CAACW,QAAhC,CAAJ,EAA+C;AACvCT,QAAAA,IAAI,GAAC,IAAL;AACA,aAAKU,QAAL,CAAe;AAAChB,UAAAA,SAAS,EAAE;AAAZ,SAAf;AACP,OAHD,MAIK;AACT,aAAKgB,QAAL,CAAe;AAACjB,UAAAA,QAAQ,EAAC;AAAV,SAAf;AACA,aAAKiB,QAAL,CAAe;AAAChB,UAAAA,SAAS,EAAE;AAAZ,SAAf;AACA,eAAOR,KAAK,CAACyB,IAAN,CAAY,gBAAZ,EAA8B;AAAC,sBAAYb,QAAQ,CAACW,QAAtB;AAAgC,sBAAaX,QAAQ,CAACc,QAAtD;AAAgE,qBAAUd,QAAQ,CAACe;AAAnF,SAA9B,CAAP;AACH;AAAC,KAXE;AAWA;;AAEJC,EAAAA,MAAM,GAAI;AACV,QAAI,KAAKtB,KAAL,CAAWE,SAAf,EAAyB;AACrB,aAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACJ,oBAAC,UAAD;AAAY,QAAA,QAAQ,EAAE,KAAKE,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADI,EACwC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sDADxC,CAAR;AAEH,KAHD,MAII;AACJ,UAAI,KAAKJ,KAAL,CAAWC,QAAf,EAAyB;AACrB,eAAQ,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AACH,OAFD,MAEO;AACP,eACA,oBAAC,UAAD;AAAY,UAAA,QAAQ,EAAE,KAAKG,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAC8C;AAAC;AAClD;;AAtCqC;;AAwCtC,eAAeR,MAAf","sourcesContent":["import React from 'react';\nimport SignUpForm from \"./SignUpForm\";\nimport axios from 'axios';\nimport { Redirect } from 'react-router'\n\n\nclass SignUp extends React.Component  {\n    constructor (props) {\n        super (props)\n        this.state = {\n          finished: false, \n          usererror:false,\n          countries: []\n        }\n        this.SignUpRequest=this.SignUpRequest.bind(this);\n      }\n\n    SignUpRequest(userData) {\n        const existingusers=[]\n        let flag=false\n        axios.get ('/catalog/users')\n            .then (res => {res.data.forEach(name => {\n                 existingusers.push(name)})\n            if (existingusers.includes(userData.username)) {\n                    flag=true\n                    this.setState ({usererror: true})\n            }\n            else {\n        this.setState ({finished:true})\n        this.setState ({usererror: false})\n        return axios.post ('catalog/signup', {'username': userData.username, 'password' : userData.password, 'country':userData.country})\n    }})}\n\n    render () {\n    if (this.state.usererror){\n        return (<div>\n            <SignUpForm onSubmit={this.SignUpRequest} /><p>This nickname is reserved, try another one</p></div>)\n    }\n    else{\n    if (this.state.finished) {\n        return (<Redirect to='/signin' />)\n    } else {\n    return (\n    <SignUpForm onSubmit={this.SignUpRequest} />)}}\n}}\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}