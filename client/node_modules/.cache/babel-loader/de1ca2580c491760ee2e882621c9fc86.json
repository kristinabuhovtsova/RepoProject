{"ast":null,"code":"var _jsxFileName = \"/Users/kristinabuhovtsova/Documents/Countries/client/src/components/SignUp.js\";\nimport React from 'react';\n/*\nimport SignUpRequest from \"../signUpRequest\";*/\n\nimport SignUpForm from \"./SignUpForm\";\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\n\nclass SignUp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      finished: false,\n      usererror: false,\n      countries: []\n    };\n    this.SignUpRequest = this.SignUpRequest.bind(this);\n  }\n\n  SignUpRequest(userData) {\n    const existingusers = [];\n    let flag = false;\n    axios.get('/catalog/users').then(res => {\n      res.data.forEach(name => {\n        existingusers.push(name);\n      });\n\n      if (existingusers.includes(userData.username)) {\n        flag = true;\n        console.log('here');\n      }\n    });\n\n    if (flag) {\n      this.setState({\n        usererror: true\n      });\n    } else {\n      this.setState({\n        finished: true\n      });\n      return axios.post('catalog/signup', {\n        'username': userData.username,\n        'password': userData.password,\n        'country': userData.country\n      });\n    }\n  }\n\n  render() {\n    if (this.state.usererror) {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, \"This nickname is reversed\");\n    } else {\n      if (this.state.finished) {\n        return React.createElement(Redirect, {\n          to: \"/signin\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(SignUpForm, {\n          onSubmit: this.SignUpRequest,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        });\n      }\n    }\n  }\n\n}\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/kristinabuhovtsova/Documents/Countries/client/src/components/SignUp.js"],"names":["React","SignUpForm","axios","Redirect","SignUp","Component","constructor","props","state","finished","usererror","countries","SignUpRequest","bind","userData","existingusers","flag","get","then","res","data","forEach","name","push","includes","username","console","log","setState","post","password","country","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAA0B;;;AAE1B,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;;AAGA,MAAMC,MAAN,SAAqBJ,KAAK,CAACK,SAA3B,CAAsC;AAClCC,EAAAA,WAAW,CAAEC,KAAF,EAAS;AAChB,UAAOA,KAAP;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,KADC;AAEXC,MAAAA,SAAS,EAAE,KAFA;AAGXC,MAAAA,SAAS,EAAE;AAHA,KAAb;AAKA,SAAKC,aAAL,GAAmB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAAnB;AACD;;AAEHD,EAAAA,aAAa,CAACE,QAAD,EAAW;AACpB,UAAMC,aAAa,GAAC,EAApB;AACA,QAAIC,IAAI,GAAC,KAAT;AACAd,IAAAA,KAAK,CAACe,GAAN,CAAW,gBAAX,EACKC,IADL,CACWC,GAAG,IAAI;AAACA,MAAAA,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiBC,IAAI,IAAI;AACnCP,QAAAA,aAAa,CAACQ,IAAd,CAAmBD,IAAnB;AAAyB,OADf;;AAEf,UAAIP,aAAa,CAACS,QAAd,CAAuBV,QAAQ,CAACW,QAAhC,CAAJ,EAA+C;AACvCT,QAAAA,IAAI,GAAC,IAAL;AACAU,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACP;AAAC,KANN;;AAOA,QAAIX,IAAJ,EAAS;AACL,WAAKY,QAAL,CAAe;AAAClB,QAAAA,SAAS,EAAE;AAAZ,OAAf;AACH,KAFD,MAGS;AACT,WAAKkB,QAAL,CAAe;AAACnB,QAAAA,QAAQ,EAAC;AAAV,OAAf;AACA,aAAOP,KAAK,CAAC2B,IAAN,CAAY,gBAAZ,EAA8B;AAAC,oBAAYf,QAAQ,CAACW,QAAtB;AAAgC,oBAAaX,QAAQ,CAACgB,QAAtD;AAAgE,mBAAUhB,QAAQ,CAACiB;AAAnF,OAA9B,CAAP;AACH;AAAC;;AAEFC,EAAAA,MAAM,GAAI;AACV,QAAI,KAAKxB,KAAL,CAAWE,SAAf,EAAyB;AACrB,aAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAAP;AACH,KAFD,MAGI;AACJ,UAAI,KAAKF,KAAL,CAAWC,QAAf,EAAyB;AACrB,eAAQ,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAR;AACH,OAFD,MAEO;AACP,eACA,oBAAC,UAAD;AAAY,UAAA,QAAQ,EAAE,KAAKG,aAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAC8C;AAAC;AAClD;;AAvCqC;;AAyCtC,eAAeR,MAAf","sourcesContent":["import React from 'react';/*\nimport SignUpRequest from \"../signUpRequest\";*/\nimport SignUpForm from \"./SignUpForm\";\nimport axios from 'axios';\nimport { Redirect } from 'react-router'\n\n\nclass SignUp extends React.Component  {\n    constructor (props) {\n        super (props)\n        this.state = {\n          finished: false, \n          usererror: false,\n          countries: []\n        }\n        this.SignUpRequest=this.SignUpRequest.bind(this);\n      }\n\n    SignUpRequest(userData) {\n        const existingusers=[]\n        let flag=false\n        axios.get ('/catalog/users')\n            .then (res => {res.data.forEach(name => {\n                 existingusers.push(name)})\n            if (existingusers.includes(userData.username)) {\n                    flag=true\n                    console.log('here')\n            }})\n        if (flag){\n            this.setState ({usererror: true})\n        }\n            else {\n        this.setState ({finished:true})\n        return axios.post ('catalog/signup', {'username': userData.username, 'password' : userData.password, 'country':userData.country})\n    }}\n\n    render () {\n    if (this.state.usererror){\n        return <p>This nickname is reversed</p>\n    }\n    else{\n    if (this.state.finished) {\n        return (<Redirect to='/signin' />)\n    } else {\n    return (\n    <SignUpForm onSubmit={this.SignUpRequest} />)}}\n}}\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}