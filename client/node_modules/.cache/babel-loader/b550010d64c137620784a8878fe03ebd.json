{"ast":null,"code":"var _jsxFileName = \"/Users/kristinabuhovtsova/Documents/Countries/client/src/components/Statistics.js\";\nimport React from 'react';\nimport '../css/App.css';\nimport { NavLink } from 'react-router-dom';\n\nfunction comparePop(a, b) {\n  return b.visits - a.visits;\n}\n\nclass Statistics extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      countries: []\n    };\n  }\n\n  componentDidMount() {\n    let list = [];\n    fetch('catalog/countries').then(res => res.json()).then(count => {\n      count.forEach(one => list.push({\n        'name': one,\n        'visits': 0,\n        'fromwhere': null\n      }));\n      this.setState({\n        countries: list\n      });\n    });\n  }\n\n  render() {\n    let topcountries = this.state.countries;\n    this.props.stat.forEach(data => {\n      data.viscountries.forEach(country => {\n        if (topcountries.find(item => item.name === country)) {\n          topcountries.find(item => item.name === country).visits += 1;\n          topcountries.find(item => item.name === country).fromwhere = data.usercountry;\n        }\n      });\n    });\n    topcountries.sort(comparePop);\n    let yourtopcountries = [];\n    topcountries.forEach(one => {\n      if (one.fromwhere === this.props.usercountry) {\n        yourtopcountries.push({\n          'name': one.name,\n          'visits': one.visits\n        });\n      }\n    });\n    const toplist = [];\n    topcountries = topcountries.slice(0, 10);\n    topcountries.forEach(one => {\n      if (one.visits !== 0) {\n        toplist.push(one);\n      }\n    });\n    yourtopcountries = yourtopcountries.slice(0, 5);\n    return this.props.in ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, \"Top of the most popular countries \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), \" for travel:\"), toplist.map((country, ind) => React.createElement(\"p\", {\n      key: ind,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, ind + 1, React.createElement(NavLink, {\n      to: String('/countries/' + country.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \" \", country.name, \" \"), \" (Visits:\", country.visits, \")\"))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"The most popular countries for travel  \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), \" among poplutaion of your country:\"), yourtopcountries.map((country, ind) => React.createElement(\"p\", {\n      key: ind,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, ind + 1, React.createElement(NavLink, {\n      to: String('/countries/' + country.name),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \" \", country.name, \" \"), \" (Visits:\", country.visits, \")\")))) : React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Firstly, you need to sign in\");\n  }\n\n}\n\nexport default Statistics;","map":{"version":3,"sources":["/Users/kristinabuhovtsova/Documents/Countries/client/src/components/Statistics.js"],"names":["React","NavLink","comparePop","a","b","visits","Statistics","Component","constructor","state","countries","componentDidMount","list","fetch","then","res","json","count","forEach","one","push","setState","render","topcountries","props","stat","data","viscountries","country","find","item","name","fromwhere","usercountry","sort","yourtopcountries","toplist","slice","in","map","ind","String"],"mappings":"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","sourcesContent":["import React from 'react';\nimport '../css/App.css';\nimport {NavLink } from 'react-router-dom'\n\nfunction comparePop(a, b) {\n  return  b.visits - a.visits;\n}\n\nclass Statistics extends React.Component {\n  \n  constructor () {\n    super ()\n    this.state = {\n      countries: []\n    }\n  }\n\n  componentDidMount() {\n      let list=[]\n      fetch ('catalog/countries')\n      .then (res => res.json())\n      .then((count) => {count.forEach ((one) => list.push ({'name': one, 'visits': 0, 'fromwhere': null}));this.setState({countries: list})})\n    }\n    \n\n      \n        render () {\n        let topcountries=this.state.countries\n        this.props.stat.forEach(data=> {data.viscountries.forEach(country => {\n          if (topcountries.find (item => item.name===country)){\n          topcountries.find (item => item.name===country).visits+=1\n          topcountries.find (item => item.name===country).fromwhere = data.usercountry}\n        })})\n        topcountries.sort(comparePop);\n        let yourtopcountries=[]\n        topcountries.forEach (one => {if (one.fromwhere===this.props.usercountry) {\n              yourtopcountries.push({'name' : one.name, 'visits': one.visits})\n        }})\n        const toplist=[]\n        topcountries=topcountries.slice(0, 10)\n        topcountries.forEach (one => {if (one.visits !==0) {\n            toplist.push(one)\n        }})\n        yourtopcountries=yourtopcountries.slice(0,5)\n\n            return (\n              this.props.in ?\n                <div>\n                  <div>\n                    <h3>Top of the most popular countries <br/> for travel:</h3>\n                    {toplist.map((country, ind) => \n                    <p key={ind}>{ind+1} \n                    <NavLink to={String('/countries/'+ country.name)}> {country.name} </NavLink> (Visits:{country.visits})\n                    </p>)}</div>\n                    <div>\n                    <h3>The most popular countries for travel  <br/> among poplutaion of your country:</h3>\n                    {yourtopcountries.map((country, ind) => \n                    <p key={ind}>{ind+1} \n                    <NavLink to={String('/countries/'+ country.name)}> {country.name} </NavLink> (Visits:{country.visits})\n                    </p>)}</div>\n                </div>\n                : <h3>Firstly, you need to sign in</h3>\n\n            )\n        }\n}\n\n\nexport default Statistics"]},"metadata":{},"sourceType":"module"}